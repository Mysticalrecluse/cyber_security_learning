# 第二周测试答案

提示空间满NO space left on device，但df可以看到空间很多，为什么

```bat
节点编号inode数量不足，一个文件能被创建需要同时满足两个前提
足够的空间，以及该文件系统下还有剩余的节点编号inode
```



我有一个目录test，该目录里有n个子目录，请问此时test目录的硬链接数量是多少

```bat
n+2
```



写一个别名，将所有要删除的文件，移动到创建的垃圾箱目录中，垃圾箱中，每天的垃圾文件都会放入"data-当前日期"的目录中

```bash
rm='dir=/Storage/backup/data-`date +%F`;mkdir -p $dir;mv -t $dir'
```



将/etc/app目录下，所有的后缀为.conf的配置文件中的DEBUG=true，替换为DEBUG=false
答案：

```shell
sed -i 's/DEBUG=true/DEBUG=false/g' /etc/app/*.conf
```



统计access2.log中每个不同的IP出现的次数,并按照从大到小排序

```http
从下面链接下载access2.log文件进行实验
https://www.mysticalrecluse.com/script/teach/access2.log
```

答案：

```shell
awk '{print $1}' access2.log | sort | uniq -c | sort -nr
```



统计access.log中，哪些IP，在什么时间，发生了4XX ，输出格式如下
(提示：可能使用到的命令：grep,awk,paste等)

```shell
# 示例
66.155.16.61    [31/Oct/2024:21:12:06+0800]  403 
111.7.96.150    [31/Oct/2024:21:54:47+0800]  400 
```

答案

```shell
# 方法1
grep -P "\" 4[01]\d{1} " access2.log |awk -v OFS="\t" '{print $1,$4$5}'|paste -d ' ' - <(grep -Po " 4[01]\d{1} " access2.log) |wc -l
 
# 简单方法2
cat access.log |grep -Po ".*4\d{2} "|awk '{print $1,$4$5,$NF}'
```



统计一篇文章中，出现频率最高的前5个单词?
答案：

```shell
grep -Po "\b[a-zA-Z]+\b" article.txt |tr "A-Z" "a-z"|sort|uniq -c|sort -nr|head -5
```



使用正则表达式精准匹配IP地址，并使用该正则表达式从下面IP中筛选出正确的IP

```bat
112.2.0.11
282.112.3.6
12.01.02.333
10.0.0.888
10.1.0.2
4.4.4.4
172.22.5
```

```bat
grep -P "^(((25[0-5])|(2[0-4][0-9])|(1[0-9][0-9])|([1-9]?[0-9]))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9][0-9])|([1-9]?[0-9]))$" 
```



分析执行 `cp /etc/issue /data/dir/` 所需要的最小权限？

```bat
/bin/cp 需要x权限
/etc/ 需要x权限
/etc/issue 需要r权限
/data 需要x权限
/data/dir 需要w,x权限
```



简单题：Linux中的目录和文件的权限区别？分别说明读，写和执行权限的区别

```bat
rwx对于文件的权限意义
- r: 可查看文件内容
- w: 可修改文件内容
- x: 可执行，发起一个进程

rwx对于目录的权限意义（与文件不同）

- r：可以使用ls查看此目录中文件名列表，但无法看到文件的属性meta信息，包括inode号，不能查看文件的内容
- w：可以在此目录中创建文件，也可以删除此目录中的文件，而和此被删除的文件的权限无关。
- x：如果，没有该目录的执行权限，用户将无法访问这个目录下的所有文件，所以执行权限是目录访问的基本权限，没有执行就无法进入，是的，连目录进都进不去！
  - 如果只有x,没有r的话，对于目录来说，就是只能访问，但是看不到ls，就是没有访问目录下文件名的权限，但是如果这个文件你知道名称，且这个文件的通用权限有读权限，那么对于普通用户来说，只是无法浏览目录下文件名及文件元信息，但是依然可以cat到文件内的内容
```

