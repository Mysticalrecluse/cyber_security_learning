# 面试1：
## 面试背景
### 薪资11k，研究所涉密项目，可能996
## 面试内容
A: 先问一下，你这块是离职还是在职
B: 我是离职的。离职了一个多月了

A：方便问一下你上份工作的薪水吗？和你的期望薪资
B：我上一份工作是11k左右，然后期望薪资的话就差不多也是这样子。

A：11k左右。十一是吧？对。这样刚才我们招聘有没有跟你说我们所项目的一个具体情况？
B：没有说比较多

A：我简单跟你沟通一下，这个项目是我们公司的一个外派的一个项目
B：我知道

A：外派项目，因为现在项目的团队，包括客户那边项目比较急，所以现在他们的项目都在攻关阶段，可能每天的工作时间可能会有所增长，可能会实行996时长工作方式，我不知道你这块能不能接受。
B：可以接受

A：我刚刚看你的一下你的简历， K8s用过吗？
B：k8s用过

A：能简单说一下你用的k8s都做了哪些东西吗？
B：k8s，我之前用opeater搭建了一个elk系统

A：然后呢
B：我平时也会协助公司进行 k8s的技基本的容器编排的管理，或者排除故障之类的事情。

A：搭过集群这块吗？
B：通过kubeadm和kubeaze都搭建过，搭过三主三从，然后中间用了haproxy+keepalived做负载保证高可用

A：我简单问下其他的，就这些项目中，你有没有涉及自己从0到1进行部署这块的一个工作的
B：有一个日志系统是从0到1自己部署上去的

A：首先部署什么，后续部署什么，然后后续像一些文档清单是不是你自己编写的，你能不能简单说下从0~1怎么去搭建怎么去部署的

B：...通过operater搭建。。。，然后手动搭建也搭建过，搭建过程...

A:docker容器那块有接触吗
B：也用过，一般用来搭建一些镜像，就是把这些jar包编译，然后构成镜像

A：简单说下Nginx的配置优化，这块你是怎么优化的
B：CPU亲缘性，缓存机制

A：关于nginx跨域有涉及过吗
B：通过域名做反向代理吗？

A：我们有个比较常见的问题，你简单说下，就是两条服务器不能相互访问，你判断下不能互访的原因是什么？
B：。。。

A：说下nacos配置中心这块的吗
B：。。。

A：能简单说下redis哨兵这块的吗
B：

# 面试2：
## 面试背景：面试3的一面，自动化驾驶平台，一面成功
## 面试内容
A：重点介绍下Jenkins和k8s的一些工作
B: 自我介绍...徐老师你好，我叫苏林春，然后是从10 20 13年毕业至今，然后有10余年的运维工作经验，从最初咱们接触传统运营服务架构，然后后来随着 doctor k 8s开源，然后以及企业生产中实际的应用，然后就开始接触使用 k8s容器管理平台，日常工作就是有传统服务和k8s集群的选型部署，还有一些日常的监控和健康检查，然后会使用到传统的话，会使用 x k84k8s使用这个朋友米修饰来普罗米修斯来监测系统和网络的状态这些，然后会定期的话对这个系统网络和应用这些进行健康检查，还有平时还会有一些日常故障的处理和恢复，使用 elk日志管理工具，然后再结合普劳米修斯莱比斯监控工具，然后快速的故障的定位，然后处理问题，然后写故障文档，然后进行再编写故障预案。
后期的话还会对一些通过数据分析和系统监控这些找出性能的瓶颈，然后对系统进行一些优化，提高系统响应速度和吞吐量这些，还会有一些对数据的备份和恢复，制定一些数据备份的策略，确保关键数据能够定期备份，然后还会定期进行灾难恢复演练，这些，平时还会有系统的更新打补丁这些，然后还有和开发团队测试业务这些沟通，还会对他们进行一些培训这些工作

A: 说一下CICD，你们产品的编译包括部署，这些平时有牵扯到吗
B：然后的话我们这边CICD的话主要是用了给他搭了个Gitlab代码仓库，然后再结合Jenkins的话，然后配置一些habor这种镜像仓库，然后进行CICD代码的推送，自动发布发版这些

A：ok。你们的应用服务有哪些种类？主要是一些网络服务吗？我看公司的介绍包括这个产品介绍比较少，主要是一些比方互联网的应用服务吗？还是其他的一些业务应一些业务情况？
B：要的话安徽这边的话，它针对的就是一个政务的平台，这种政务一体化在线平台，然后他就是把政府各个相关部门一些群众需要办事的一些流程的话集合到我们这个平台，然后我们这边负责对接他们接口，然后也有自治区的，然后再对接到我们这边的，比如说是政务大厅或者是街道办这些，然后工作人员的话，可以给群众去办理一些的手续或者是办证这些都可以。

A：Ok这种基本上是政务业务的话会牵涉到几大块，一个是你们的外部引擎外部设备意思，另外一个肯定会牵涉到关于数据库对吧？可能还有做一些消息队列的一些应用服务，对，您大概介绍一下，比方说你们的服务部署在k8s的一个公有云平台上，然后你们的部署的架构怎么样子的？比方说我的webservice是肯定可能用了loadbalancer，也有可能没有用到lb，可能是我的业务服务用的lb或者database，有可能应用，也有可能对database用了一些备份，你能大概介绍一下你们的框架是什么样子的吗？

B：我们这边的话主要就是用的nginx，然后的话代码是用Java写的，然后消息队列的话用的是redis，关系数据库还是用的比较传统 mysql，然后部署的主从然后跑到 k8s集群上面，然后又搭建了一套prometheus来进行监控

A: 刚才听到你们的databse就是主从做了备份，webserver用的nginx去做的lbj吗，还是用的公有云的lb的业务
B：我们没有用公有云，它是用的城市里边，它政府里面每个城市它都有一个数据大数据中心，然后我们这边比如说申请要50台服务器的话，然后我们直接和对接政府的相关人员，负责数字化这边的，然后去他们去申请资源，然后到时候他会把配置清单那些会发过来，我们进行VPN，继续远程连接来进行部署配置这些。

A：这样子的话更可能采用底层的这种负载均衡方法，对你们采用的是什么负载均衡服务
B：负载均衡的话大的搭了几台nginx，还是用的nginx k8s的话，然后跑的nginx服务，然后用 k8s的话是用了haproxy和keepalived 的进行高可用和强大的负载均衡，然后又用 ingress来做的7层的负载，一个接入口，

A：loadBlance(负载均衡)有好几种模式，你们用的哪个模式
B：我们用的普通的轮询，没有加权
A：硬件服务的什么性能差不多的是吧？
B: 对像他们的机器服务器的性能， CPU内存都是一样的，基本上。

A：刚才讲了你用了p8s你们的p8s的网络拓扑图是怎么样子的？也就是说你们也刚才讲的也有很多种服务对吧？对。并且政府的这种设备是也要对外网对吧？对你整个的网络拓扑图图怎么样子的一个情况
B：网络拓扑图的话因为是用的大数据中心的，我们这边的话没有去进行网络的方面的搭建或者是部署，他们这块的话会政府这边的话，他和政务平台和政务中心的话，他们会自己有专门的人去维护，直接把网能接进去，然后在他们办公的系统里面。对，就可以使用政务一体化平台

A： Ok，即使即使咱们不对外网络内部网络的话，也会分配到这种固定IP或者是用这种域名解析，也有可能是采用的这种跟no的节点绑定或者跟work节点绑定，咱们这边的内部的服务。不对外对你刚才讲了，就是说有他们的数据中心在做维护，对内部的咱们自己部署的这些服务，它的用的网络形式是怎么样子的，都是指的用集群IP还是什么样子的？

B：用的ClusterIP它不是自动可以分配。 Ip，对，然后暴露的话都是用的English，然后直接把域名给到他们，然后不同的服务它配了不同的域名，然后他们去进行在可能是各个窗口各个单位他们用的不一样。他那个系统我们那个系统是集成到好几个部分，有是基础管理平台，有的是政务一体化的一个平台，还有一个审计的一个平台，它是一个多个小系统集合到一起的。

A：刚才讲了用到了ClusterIP对吧？对。但是你的服务一般都是这种希望，比方说用了域名解析对吧？对，因为是要对外对吧？或者是有可能是政府网络外层又做了一层映射，但至少你的对外服务肯定是固定的，k8s怎么把你的刚才讲了是clusterIP集群IP，它是动态分配的，尤其是我们下一个版本部署或者是中间修了个bug，我可能又分配又重新部署一下，但是分配的IP在变化，怎么去解决IP的这种问题，k8s是怎么样子去去制定规则，
B：回答错误。。。回答的pod调度，正确答案是coreDNS

A：ELK它本身工具日志收集采用的什么
B:用的filebeat

A：filebeat是每个pod都要部署一套吗
B:直接的话就是用deamonset话，然后部署的filebeat，然后就把 Note节点上的数日志都采集，然后传输到Kafuka，然后再从kafuka进行消息队列，然后再到logstash，然后进行一些筛选或者是加工处理日志，最后的话然后再传输到Elasticsearch数据库当中，进行最后再用Kibana的话来进行展示。

A：刚刚将来logstash可以做过滤，过滤的形式有好几种，能大概介绍下吗?过滤规则是怎样的

B：它主要的话就是把别的文件的格式就是转换成Jason格式的格式。然后的话比如说恩基克斯的话，它有访问的日志，还有一些错误日志，然后他都可以去进行收集。然后有的Tom cat里面的它日志的话，有些是一些因为它的迪吧的数据迪吧的信息比较多，然后可以的话进行整进行编辑，可以把一些没用的日志信息可以过滤掉，或者是重新收集重新去核一下

A:如果是我自定义的一个服务，然后日志格式也是比较自定义的，我怎么在logstash上去做统一的规则，然后输入到咱们的elk的service上
B：gg

A：ok就自定义这一块接触的比较少是吧？
B: 对

A：你能大概介绍一下你做了哪些性能优化相关的工作吗？
B：性能优化的就是指的是具体的服务，比如说nginx的最大连接数或者是session长连接保持的是时间这些，还有一些上传文件，默认的n几个字上传好像是一兆，然后后来后期的话改成10g这些，然后还对日志进行切割。

A：对一些数据库有一些监管吗，因为数据库你会发现
某个时间段它占的CPU或者是它占用的存储空间突然增大了，有什么定位问题的方法和排查问题的方向没有，比方说分律师监管我们妈c口，存储空间突然增加了0.5倍以上，然后它的网络占用资源和 CPU站资源也在突然做了一个飞跃式的上升，遇到这种问题我们应该排查的方向或者是定位问题的方向是怎么样，大概介绍一下。

B：这个的话我觉得还是从他线程池的数量，线程池数量可能需要优化一些，还有的话对数据库慢查询日志得看一下是否有不合理查询语句，然后需要开发重新去优化一些查询语句。还会的话看看网络的带宽会不会会不会有瓶颈，它突然有很多的访问来进行mysql的读写的话会不会影响带宽，然后导致数据库服务器的话负载比较高，性能比较差一些

A：mysql的一般的检查工具熟悉吗，比方说navicat，或者一些第三方工具
B：navicat用的多一些

A：假如说我要把数据库做迁移，我们经常会遇到一个项目到另外一个项目就迁移到一起工作对吧？对。利用地图可以做到数据的迁移。当然我还有一种需求只迁移，因为它的时刻表不迁移数据库有什么方法
B：

A：脚本语言熟悉吗
B：Shell，然后Python的话是用的用的时候用一些提前之前找到的，然后进行修改这些修改然后拿来用，

A：linux系统的deb包制作熟悉吗
B：no

A：docker运行image有两种模式，一个是容器export出来的，两一个是load image，
B：一个是从镜像中保存，一个是从容器中导出

A：那这两种方式有什么区别没有？
B：额。。。

A：提示：发现save出来的image很大，容器导出的就很小
B：gg

A: 我们并发一个任务，发现部分任务失败了，k8s我们打一些命令，在describe的时候发现它在loadimage失败了，怎么排查问题
B：。。。


A：有用过带GPU的集群吗
B：

A：假如说 Work几点干净的，我们刚开始部署对吧？我在镜像管理服务推了第一版面积，然后我创建了一个无状态负载，我们创建无章中在启动的时候，肯定你先去从仓库管理服务器上去下载,然后后面我又升级了一个版本，就同一个服务，然后当然iamge的版本号肯定要增加对吧？然后发现这两个是有区别的，就是第一次非常慢，第二次很快为什么？

B：。。。

A：你这边有什么想问我的
B：我想知道一下咱们这边的主要的是业务是做什么

A：我们是做自动化驾驶仿真工具链的，当然会牵涉到单机版和云端版本，，然后它是运行的单机版，有的客户希望是你的仿真运行是多任务的，需要云端资源去支撑多任务这种场景，但是我们的业务和服务种类要比这个要复杂的多，并且我们会使用GPU，经常使用GPU，另外一个的话，我们对这种CICD要求也比较多一点，因为我们的产品编译因为牵涉到很多东西，今天是肯定要有多任务去做，编译任务，要触发编译任务这种管理，当然这一块你再优再优化了。
另外一个的话我也正好介绍一下具体工作，一方面是产品的编译， Cd这一块，然后另外一个的话牵扯到我们的产品的云端部署，牵涉到 n一级的镜像的打包，再一个的话要云端产品要一般都是可以把s了，然后部署到我们的云端服务上。
另外的话会牵扯到k8s平时的运维，有可能是出现了刚才讲的各种各样的一些问题点，要协助工程师或者是作为第一任优先级，你要负责去把一些问题点的可能性。
第三个工作有可能会牵扯到有可能客户是从零开始的，那么会牵涉到一些网络拓扑的创建，还有一些基本的k8s的搭建，包含了一些资源的评估，当然了还会牵扯到各个服务的负责人也会给你一些数据输入

# 面试3：
## 面试背景：自动化驾驶平台，二面，成功，薪资：2w

## 面试内容：
A: 先简单自我介绍一下：
B：好的，面试官你好，我叫苏林春，从2013年毕业至今有10余年的运维工作经验，从最初接触的传统服务架构，到后来随着docker k8s项目的开源，以及企业生产中实际的应用，开始使用k8s容器管理平台，日常的工作有传统服务和k8s集群的选型部署，以及日常的监控系统和健康检查。
使用监控工具，Prometheus来实时监测系统和网络的状态，定期对系统网络应用程序进行健康检查，还有一些日常故障的处理与恢复工作。
使用 Elb日志管理工具，使用 elk日志管理工具，Prometheus监控工具来快速进行故障的定位，然后处理问题，并写进故障文档，编写故障预案，还有通过数据分析和系统的监控，找出这个系统的性能瓶颈，对系统优化，提高系统的响应速度和吞吐量，这些还会有一些数据备份与恢复的工作，制定这个数据备份的策略，确保关键数据定期的备份，还会定期进行灾难恢复演练，还有定期更新系统和应用程序打补丁这些与开发测试业务部门进行等进行沟通协作，对客户和业务进行系统的一些培训工作，这些大致就这些。

A：你能挑两个你做过的比较大的项目介绍一下，或者你现在在做的
B：我现在在做的是一个内蒙古包头市他做的政务一体化在线政务平台，它这个平台的话，它主要打通各个政府的相关部门，以前好多咱们群众办事的时候，可能需要你到各个部门去来回的跑，然后我们这个平台的话，就把一些好多的政府的相关部门都容纳到我们这个系统平台上面来，他们就可以进行统一的来进行办理，然后通过审批的一个流程，然后到政务大厅或者是这个人社大厅或者是街道办这些社区，他们通过政府办事人员的话，群众都过去以后可以直接去办理一些相关的业务，然后通过各个流程的一些配置，就可以传递到后面的不同的部门，对。
然后还会有一些和自治区进行全区通办，或者是办理一些营业执照这些相关的部门，包括民生的一些水电气暖，还有住房公积金这些用我们的也有一些硬件产品的话，有一些呼叫号系统平板或者是这些东西

A：你讲的这是业务层面的，我说你做的工作层面，你这个项目做了多久了？
B：这个项目做了3年多

A：们是这个产品交付以后上线以后你们开始运维，还是前比如项目启动以后，整个你们会参与到一些系统架构设计，把你们运维的一些相关的一些工具，包括一些软件会一并辅助研发同时进来开发吗？或者部署
B：有从开始的总的架构，然后部署，然后到最后上线到后期的持续的运维都有

A：前期你干嘛别的项目你们这个项目首先这个项目开发多久
B：前期我们的项目是比较成熟的，然后的话是环境的话是部署到包头市的一个大数据中心，我们这边的话去把我们这个架构，比如说要申请50台这个服务器资源，去通过和政府这边相关的人员的话去申请，然后他们这边走审批流程。
到时候对审批到审批后的话，他们会把那个服务器的相关的一些连接方式或者是个IP或者这些服务器的资源发到我们手上，然后我们这边通过VPN的话去连线去部署我们那套系统。

A：部署是你负责吗
B：部署的话是由我们团队一起部署的，我们大约有三个人

A：这三个人里，你的职位是什么？
B：我的职位是也是相当于架构方面的选型这些，还有部署 K8s集群。

A:我的理解你们三个人是一个小组，这个小组总共有个负责人对吧？一般你是负责人吗？不是负责人
B：我不是负责人

A:你们三个人有个小leader是吧，你是工程师？刚说的架构，这个架构的话，咱像你说的咱软件都开发，我的架构都定了，无非咱要像你说的我申请哪些资源，网络存储对吧,申请完了以后才能部署，不存在架构设计的这个方面的工作，我都理解
B：他就是这个服务器的规模这些需要来重新选一下，看具体的这边城市里边它访问的数量或者是这些流量，来选一些价服务器的数量或者这些或者是一个带宽这些选择

A：你能说一下你们运维主要的工作吗？日常的工作我想听一听，包括你们除了一些监控以外，你们为了把这个系统监测好，主要的工作是哪一些？

B：主要的工作有一些面向客户的话，比如说是我们这边可能和客户他这个系统是长期需要迭代的，有些客户需要可能需要一些新的功能的增加或者是删除，我们这边的话会进行对相关的工作人员进行现场的一些培训，或者是在线的一个视频培训，或者是对一些新，因为他们政务平台的话，好多他们是不是一些正式职工，他们人员也变动的话比较大，有时候会会对这些人员的权限或者是信息的话进行变更更改或者是添加删除。对把一些已经离职的人员的话去把它停用相当于然后再把一些新的人员权限放开。对，还会的话对他们这些新人员的一些账号，或者是他们这些
人员的话，新人的话都会有一些培训，然后后期的话跟他们也有一些怎么说，也就是相关于系统方面的一些培训工作，会有一些我们系统上面的跟研发这边比较比较经常会沟通一些，可能就是系统方面有哪些需要改进的地方，或者是系统方面的话，可能是因为代码或者是别的问题，导致这个系统比如说是响应的话比较慢，或者是有一些资源的话访问不到，或者是有一些它数据的话不是同步的，这些的话都会跟研发或者是跟我们这边的团队去进行解决。然后走我们这边的话有个流程，一般是发邮件这边的话和领导进行报报备审批这些

A：对你讲的我听明白了，但还是偏比如说权限账号管理对吧？一些问题，这都没问题，没有听到你讲整个运维的技术方面的工作。
B：技术方面的话，我们这套系统当初的话它是部署的 K8s集群，然后的话是用的普罗米修斯来进行集群的总的监控的一个工具，对，然后日志的话是部署的 elk然后在集群上部署filebeat，用deamonset的方式进行，每台机器都可以采集到日志。对，然后的话因为它日志有时候会数据比较庞大，会需要一个中间的缓存，比如说消息中间件KafKa来做削峰填谷，最后的话再把日志数据传递到 log stack这边，来进行一个数据的过滤与整理或者是加工。最后的话然后再整合到我们的Elasticsearch日志管理的一个数据库当中，然后再搭配我们Kibana工具进行图形的界面化展示。然后prometheus的话主要是用一个，因为k8s上面这个kubelet这边它有一个Cadvicer的组件可以就是采集到暴露出 k8s的一些基本的一个基本的一些信息，包括 CPU、内存网络或者是磁环这些。然后再搭配比如说我们有ngx或者用mysql，这些的话，通过 ngx的export，或者是 mysql的export进行一些指标的采集，然后再通过配置 ALTer manager告警规则，然后再进行故障的报警，然后通过邮件或者是钉之类的通知到我们运维人员，然后通过搭配grafana选取合适的仪表板来进行监控数据的一个展示。


A:k8s集群这块是你们买的，服务里面已经有了，还是你们自己搭的
B：自己搭的，对大数据中心那边的话，它只是提供一个基础的物理的设备和一个网络的网络的一些搭建拓扑，因为他们走的是一个内网，这套系统是在内网运行的，不是像互联网或者是公网来服务的，

A：所以它整个这些pass层这些中间件你们都是你来搭的对吧？对。所以你刚才说那些工具部署配置都没问题，包括部署完了以后就运维对吧？这个也是你们的工作当中的对。你们会写一些脚本语言吗？来整个帮助你们。
B：对，会写的下脚本的话比较多，Python的话有时候的话会用一些就是借鉴一些别人的脚本，然后来进行一些小的改动，来制定一些东西，然后使用·

A：你现在是在职还是离职
B：现在在职，已经提交离职，然后在交接工作

A：交接多久
B：差不都不到两个星期可以到岗

A：你老家哪里的
B：内蒙的

A：你离职原因是什么，你自己的规划是什么

A：你有什么优点，有什么不足

A：你想加入一个什么样的团队，你有没有考虑过？

A：你这个工作岗位上次我们都是交流了下，你现在知道这个岗位我们的要求是什么
B:岗位的要求的话，因为咱们这个公司是做自动驾驶平台的，对，然后的话之前跟前面的一个面试官的话他聊了一下，然后主要是这个平台的一些运维，或者是有一些云或者是一些自建的私有的服务器这些对咱们系统的一个工作

A：这样子的，我稍微补充一下你这个岗，我刚才为什么问你这个问题？
然后我们现在公司主要同事们都是开发为主的，那么运维我们自己搭了一个搭了两个数据中心，然后我们现在没有专职的运维人员都是我们开发兼任的，所以有时候运维工作并不是很系统，所以首先我们得招一个运维的专业人员来运维我们公司的两个小的数据中心。
我们有些服务也是基于k8s对吧？这些服务构建的，所以这个是一大块。后期我们也规划就是我们这些服务会向第三方公开，这是一大块。第二就是有一些我们跟客户合作，就把我们这些软件服务部署到客户的服务器上，比如说华为云，或者说是个火山云对吧？等等不同的云主云云平台，所以这是第二个工作。部署服务到特定客户的公有云也好，私有云也好。
第三个我们内部还有一些软件发布的工作，我不知道你上次有没有聊到我们软件发布的，我们基于监控室有把我们的这一些内部，因为我们现在有很多工具有很多产品线，有的要编译，编译完了以后还要部署对软件的发布集成也是你工作的一部分，当然这块我觉得对你也是学习对吧？
你要学习怎么去把我们的这些编译，然后在那部署你也提到了 N这个是n对吧？
也可以基于它来去从cacd怎么到集成一起来做这些，如果你有相关的经验的话，也是可以来复用的，所以这三大块就是负责我们公司产品的一些集成编译跟发布，这是第三大块。第四大块我当然第四块是个option了，不一定说主要的我们系因为我们现在在我们不是内部有私有云，私有云部署完了以后，我们是想把我们的自动化这块，这个就是我们的测试自动化这块要在去优化。
目前我们的产品线自动化的比例比较少，就是功能的测试比例，我们想重点把这一块也就自动化测试这块借助于我们运维的能力，对吧？怎么基于集群，怎么基于自动化的工具把它给管理调度起来。
就第四大块是也帮助我们的测试同事测试团队，基于云端的测试集群的一个部署，包括一些技术的选型对吧？如果你对这种技术感兴趣，就可以跟同志们探讨，我刚才为什么说你们有没有参与你们的一些架构选型，有一些你可能是服务做好了就部署一下，但有一些你只要去研究不同的主题，针对你的需求，有些是功能，有一些是性能对吧？我们希望公司团队能去在云端的这一些怎么使用好这些云计算也好，大数据也好，去帮助我们的开发同志对吧？提高一些测试效率，包括一些开发效率。所以这是四第四大块。所以工作的话主要这4大块。然后能源我跟你强调一下对吧？我们是一个创业的公司，现在差不多快200人了，我们上海是大概50个人，那么我们的主要精力都是在开发这一块，然后运维我们越来越觉得这比较重要，因为之前我们没有专职人员，所以后续这个岗位我们希望同事对吧？
如果讲到专职的话就一个人，如果你到法律你是一个专职的一个运营人员，有一些开发同事能对吧？如果工作量多的话，可以辅助你去分担一部分，但专职人员就你一个我得讲清楚的好吧，然后也希望你专职人员把咱这一些包括我们一些我们有些开发的环境对吧？像我们之前也尝试过一些环境都容器化去管理，能够可以快速的去把环境也好，测试环境也好去部署，


# 面试3：
## 面试内容
A：你对k8s了解程度怎么样
B： K8s在工作当中主要是负责了一些集群的部署以及有关业务的部署到k8s的一些工作，然后还有相应的一些优化，简单的优化。

A：你能说下k8s中的pod的创建过程吗
B：。。。

A：我再问一下调度策略都有哪些?
B：...

A：Pod被拉起的过程中，它都会有哪些状态
B：。。。

A：比方说我一个pod一直卡在pending的状态，怎么排查有没有一些克隆
B：...

A: prometheus有几种数据类型
B：

A：k8s都有哪些控制器
B：

A：mysql用的什么架构


# 面试4：
## 面试背景：18-25k
## 面试内容：
A：先做个自我介绍
B：我叫苏林春。然后从2013年毕业至今的话，有10余年的运维工作经验，从最初接触的传统服务架构，然后到后来随着刀客k8s项目的开源，然后以及企业生产中实际的应用，然后开始使用k8s的容器编排平台，日常工作有传统服务和k8s集群的选型部署，还有日常的系统监控，还有健康检查使用监控工具在比斯普罗米修斯来实施监测系统和网络的状态，定期对系统网络应用程序进行健康检查，还有一些处理日常故障，还有恢复使用医疗k日志管理工具，普奥米修斯瑞贝克斯监控工具，然后进行快速的故障的定位，然后处理问题，然后编写故障手册，然后进行故障的预案的编写，还有一些通过数据分析和系统监控，找出系统性能的瓶颈，然后对系统进行一些优化，提高系统的响应速度和吞吐量，还会做一些数据备份与恢复的工作，制定数据备份策略，确保关键数据定期备份，还会定期进行灾难恢复演练，还有还会定期更新系统和应用程序打补丁这些。
最后的话还会与开发团队、测试团队、业务部门这些进行沟通和协作，然后对客户和业务部门进行一些系统的培训，这些工作大致就这些。

A：你在上个公司待多久了
B：2年

A：你们公司主要做的产品有哪些：
B:主要是做的政府的政务一体化在线平台，把一些政府的相关部门，然后一些他们比如说群众去办一些手续或者办一些什么证这些东西的话，然后整合到我们这个平台，然后统一的话在政务大厅或者是街道办或者是人力大厅这些他们那些工作人员登录到我们这个系统就可以进行办理。

A：你们公司叫什么，你的角色是什么？
B：主要就是运维一些部署实施，或者是一些平时的话有一些数据的备份，或者是有一些版本的升级，然后和研发这边去沟通，去一起去维护这套系统，还会的话和客户这边的话有时候会做一些培训，有些做一些这些培训手册或者是现场培训都有

A：你在这个公司总共做了多少个项目
B：主要就是运维一些部署实施，或者是一些平时的话有一些数据的备份，或者是有一些版本的升级，然后和研发这边去沟通，去一起去维护这套系统，还会的话和客户这边的话有时候会做一些培训，有些做一些这些培训手册或者是现场培训都有

A： Ok你们这里面平常你在这个系统里面做日常的运维，对你们现在监控用的什么产品？
B：Prometheus

A：主要监控哪些东西
B：监控的话有一些监控的，比如说是服务器的一些硬件资源，比如CPU内存，磁盘网络这些还会有一些对应用的一些监控，比如说nginx或者mysql这些用的是 node exporter，然后进行这些数据指标的采集。

A：你们nginx用的什么监控的？
B：用的prometheus

A：Prometheus的采集原理是什么，采集什么指标
B：用的node exporter采集的

A：如果不使用node exporter采集，使用命令行的话，可以通过什么方式去采集

A：你们这套监控系统它整个有多少台机器？
B：这套系统的话是部署在k8s上面的

A：你是通过这套系统去监控的普罗米宿舍里面的东西是吧？
B：对，普罗米修斯也在监控k8s的一些指标，后面是 K8s有Cadviser，它不是有一个暴露一些k8s集群一些指标吗？
因为它k8s的话自带的话它可以兼容普罗米修斯。对，然后用grafana，然后选一些仪表板，然后展示这些数据。

A：你们在监控过程中会遇到哪些问题？你们在运维Prometheus的时候监控，通过我意思是说普你们本身在普罗米修斯监控系统有没有遇到一些性能层面的问题，比如说你打个比方，你在界面上一个is包的采集不到某些指标，你有没有遇到这样的一些问题？比方说你去接k80的数据的时候接不上，或者是采集is no export的时候采集不上去，是数据这种情况有遇到过吗？
B：这种情况当时没有遇到过，因为我们主要是针对的政务人员，他访问的话不是特别的大，它不像是对外的或者是在互联网上的一些服务，并发的话没有特别大。

A:我理解比如说像杰作配置这个问题可能不是特别大，对，但是这种因为现在我们这边的监控系统可能规模比较大，基本上我们基本都是在大几千上万的，所以会有比如说经常做这种并发或者是一些这种问题处理，相当于我们是to b的。你当然很多东西，各种客户的这种奇奇怪怪的环境你都有可能出现。
所以我想了解一下，就是说你在你的监控实施经验里面，你有哪些你刚才说是或者是你没有遇到你有没有一些建议，就是说因为你也做了11年的运营经验，是你针对这一块自己有没有一些自己的一些理解，或者是比如说针对这么可能你们量没这么大，对，如果针对量大点的话，你觉得你们这套系统，比如说你现在是一比如说是一套集群，如果或者到100个集群的时候，你们这个架构你觉得应该可以怎么去调整跟优化？

B：调整优化可能它有时候会因为磁盘的空间不足，然后造成博米修斯时序数据库，它这些数据的丢失或不完整。还有的时候可能会因为网络这些问题或者其他问其他的原因的话进行写入操作，可能会失败。
我还有的话可能是监控这个目标，它自身的话可能就出现一些问题，然后无法得到普米修斯响应请求。
然后一些解决方法的话，可能就是需要检查一些网络连通性。我确定监控目标的话和普罗米修斯网络连通性要保持良好，然后的话还会看一下报警的规则是否定义的是否有问题，有没有一些语法的错误或者是逻辑的错误。
还有的话，
还有的话可能他报告警规则可能也配置的有一些问题，然后导致报警的话无法进行一些传递。


A：Ok，然后再问一下，我刚听你说也做一些版本升级，你看版本升级怎么升的？
B：使用的gitlab+jenkins做的CICD

A：我换种说法，比如说如果让你去重新有一套新的系统需要接入到你们，最开始在发布知道整个过程的接入流程是怎么样的吗？
A: 比如说我现在有新上线一套新的系统，想通过你刚才说这套CCD的流水线来做编排，然后让你去配置这个东西。
B：整个自动化构建的过程。。。

A：然后再问一下你们日常的这些部署是通过什么方式去部署了？
B：用ansible的自动化部署工具

A：你们是全部脚本化吗
B：有些用脚本，用些用人工

A：你能简单讲下你们软件部署的时候，它包括他前期做了哪些准备，以及部署的过程中要做哪些事，以及部署后需要做哪些事，
B：服务器环境初始化，打通sshkey验证，ansible连接其他节点，编写playbook，根据不同模块初始化其他机器的环境，然后去进行一些服务器的服务的选型安装，然后还会对一些服务来进行特殊的账号来授权对服务进行权限的管理

A：ok。你们现在给到客户培训主要培训哪些内容？
B：。。。

A：你为什么离职
B：。。。

A：你干了10多年，你觉得自己哪些技术最擅长
B：特别擅长的，因为感觉k8s还可以，因为最近几年的话都在研究 K8s然后看一些cncf的顶级的项目或者是一些毕业的东西，比较看好k8s还是对云原生这块也好，

A：你linux这块怎么样
B：用的比较多，ubuntu，centos都有

A：考过一些相关的证件吗
B：没有，感觉含金量不高

A：问一下Linux相关的东西，你们现在装比如说你现在去部署安装的时候装软件，你们是通过是原版装还是怎么样 rpm包装的？
B:没有特殊的要求的话，直接就用rpm包就可以装。
如果是有一些特殊的要求，可能会需要里面的具体的一些模块的话，就会用这个二进制来安装

A：让你现在搭建一个yum源服务器的话，你知道怎么搭吗？比如说我在内网，我有多台机器对吧？多台机器我在装的时候都会可能比如说搭一个机器人软件，这个机器人软件它可能都需要安装某一个其中的软件，然后这个软件它是有一定的依赖关系的，然后我现在手头上只有这些相关的一些偏方，然后怎么去实现每台机器都能够去装这个软件，去解决它的依赖关系，所以现在这样，然后我现在这包也比较多，大概十几二十个，然后之间又有依赖关系，所以我现在想让你去你帮我搭一个样本服务器，然后可以给到每台机器都能够成为样板，这些装。
B：...

A:比如说如果你再装一个软件的时候，它发你发现它缺少一些依赖包，
一般你是通过什么方式解决这个问题的？
比如说我要装一个埋设口，它就告诉你说缺某一个包或者某一个库文件，你怎么去解决这个问题，

B：上网找参考

A：你对Linux里面一些文件系统管理相关的熟吗
B：熟悉

A：inode和block之间关系是啥
B：。。。


A：vg，lv逻辑卷存储卷了解吗
B：了解

A：现在你去装软件的时候，然后有一个比如说我想把这个软件单独安装在一个特殊的固定的比如/data下面，然后想让你给从一个硬盘里面去划分一个lv单独挂在目录下，可以理解我意思吗？可以简单说一下整个操作的流程

B:...

A：域名解析这块，你比如说有些网站，你这边处理客户端的问题的时候发现有些网站访问不了，你应该怎么处理
B：前端访问不了的话，可以看一下它那个页面的一些错误码，看是400多的还是500多的，如果是服500多的话，可能就是服务器后RS那边后端服务器那边可能有问题，如果400多的话可能是外部服务器或者是你这个页面的话或者是页面文件静态文件这些的话可能找不到或者什么，还有可能的话页面都打不开，对

A:浏览器打不开，而且啥错误码都没有，如何排查
B：错误码不了的话，可能是他 Dns域名解析可能也有问题。

A：对，那就像这些问题你一般怎么去排查？比如说他现在一个一个因为你现在接触的用户可能都各种技术水平都有，他现在就告诉你，比如说你告诉他我这个网站的访问地址，然后结果他你一点击那个地址，结果查到没有，网络不可达，这时候你怎么去排查这个问题？
B：网络不可达的话可能就是它域名解析有问题，然后查看用 Ns look up，然后查看是否能正确解析 IP地址，然后也可以
看路由表，看是否能通。
然后检查网络连接这边的问题，或者是看一下它这个服务器的防火墙设置是否有问题，还有的话有一些外部服务器是否正常，然后通过监控软件的话可以看到，然后的话还有可能的话可能是服务器挂掉，然后看一下服务服务器的一些端口是否打开。

A：你都是一些排查方向，对吧？它每个方向怎么去验证它是对的。
针对你这套系统来说，比如说域名解禁它应该是look它解析报错，ok，怎么知道他哪是哪里配置的问题导致的，然后怎么解决？
域名解析的问题怎么排查怎么解决，是网络的问题，怎么定位到哪怎么解决。比较关注这个一个是问题的定位，还有一个是解决的思路，是排查的方向。

B：。。。


A：你对shell脚本怎么样
B：用的挺多的

A：平常写个比较复杂的脚本有哪些
B：就一些部署，

A：mysql熟吗
A：比如说我现在想做一个mysql的备份，然后周三晚上备份一次，然后只保留比如说保留一个月，比如1个月要4个副本，你来帮我实现这个功能。

B: 这个的话用脚本写一下备份的备份方法，用my circle down本，然后备份数据库，然后用杠u杠h杠p连接到数据库，然后把数据库或者是里面的某个表来进行备份，然后命名的话以名称百%分号h百分号m这些来命名，然后再添加到定时服务器call job里面，然后用分时月周的话可以写，每周的话可以进行备份

A：要保留4份
B：。。。

A：你对三剑客熟吗
B：熟

A：这三个的话主要应用场景在哪里？
B：。。。

A：你对中间件熟悉的，那zookeeper主要是做啥的
B：zookeeper用的比较少，kafka用的比较多，

A：kafka如何看它的消费速度，比怎么关注它
B：。。。

A：他的topic信息存在哪里知道吗
B：。。。

A：k8s熟吗？简单说下每个组件的作用
B：。。。

A：k8s如何从外部访问pod
B：。。。

A：如果是nodepod这种方式，他整个外面的请求是怎么路由到pod上的，他的整个机制是怎样的，怎么实现的


# 面试5：
## 面试背景：飞扬科技
## 面试内容
A：简单做个自我介绍，主要是工作经历，还有包含涉及到技术栈之类的
B：行。面试官你好，我叫苏林春，然后从2013年毕业至今有10余年的运维工作经验，从最初接触的咱们传统服务架构，然后到后来随着 Doctor k 8s的项目的开源以及企业生产中实际的应用，开始使用 k8s容器管理平台，日常工作有传统服务和k8s集群的选型部署，还有日常的系统监控与健康检查，常用的监控工具有x和普罗米修斯来实时监控系统和网络的状态，定期的话对系统和网络应用程序进行一些健康的检查，还有平常的工作，还有日常故障的处理与恢复，使用 e1k日志管理工具，华米修斯labis监控工具快速进行故障的定位，然后处理问题，然后写进故障文档中并编写故障预案手册，还有通过一些数据的分析和细系统的监控，找出系统性能瓶颈，对系统进行优化，提高系统的响应速度和吞吐量这些还会做一些数据备数据备份与恢复的工作，制定数据备份策略，确保关键数据的定期备份，还会定期进行一些灾难恢复演练这些。
其他工作还有定期更新一下系统和应用程序打补丁这些与开发团队、测试团队，业务部门这些进行沟通协作，然后对客户或者是业务部门进行一些系统的培训，这些工作大致就这些，谢谢


A：你这边接触过的服务器都是哪些类的
B：ubuntu,centos，redhat都有，ubuntu多一些

A：ubuntu主要用哪个版本
B：ubuntu:1804

A：要查服务器的标准使用情况
B：命令的话使用top，监控工具使用zabbix，如果k8s使用prometheus

A：判断内存的
B：free -h

A: 判断磁盘
B：lsblk

A: 正常的话就是监控会监控到某个目录，监控到哪些，你监控磁盘的话应该是针对每个磁盘还是针对某个目录？`

B：针对是磁盘系统的磁盘，

A：磁盘使用率
B：达到多少对吧？对，比如说达到80%，他就发写一些告警的规则，然后通过邮件或者是企业微信之类的来进行告警。

A：磁盘利用率到80%，需要怎么处理
B：果查到司法达到80%以后的话，然后在如果是用监控软件的话，然后就进行设置告警规则，然后去通知或者邮件或者是别的方式，然后通知运维人员进行通知，然后的话运维人员通过查看查看具体的数值或者是哪台服务器，它这边的内存的话使用过高，然后去连接上去，然后查看是哪个服务

A：我们平时如果说想查一下哪个目录下面目录满了，然后看一下目录的哪个文件比较大，想处理一下，想看一下这文件的大小怎么去看，
B：ls -l， du -sh

A:我们看一下那个服务器的内核的话是什么东西去看
B：uname -a

A：有更直接的办法吗
B：sysctl -a

A:redis你接触什么方式部署
B：cluster

A：nacos主要是实现哪些功能
B：

A：你们kafka也是k8s上的？
B：

A：kafka你们用的哪种协议的，zookeeper还是新版
B：

A：介绍下负载均衡，就是haproxy，nginx有哪些区别
B：

A：haproxy他7层和4层的区别
B：

A：nginx做负载均衡的话，你们配置的话什么样的
B：

A：CICD你们是自己搭的还是使用的
B：自己搭的，用的gitlab和jenkins

A:说一下持续集成和持续发布这个流程是什么样的
B:它就是开发的话去把这个代码推送到 get live代码仓库，然后它也可以触发构建，比如说 web hook这些，然后通过某些动作，比如说pose，他pose代码以后，然后金克斯这边的话就负责拉取这个代码，然后选择合适的工具进行构建，然后Java的话也有对应的插件，比如说man前端的话用什么npm这些架构构建，然后最后的话用送达Q币，然后进行代码的质量检测，之后的话生成可部署的这些架包或者刀客镜像外包这些，然后储存，最后的话再部署到相关的环境中，通知相关人员

A:CI流水线上面的东西，是靠什么实现的
B：

A：说一下CI和CD的区别，哪一块属于CI，哪一块属于CD
B：

A：zabbinx自定义监控项过程
B：

A：Prometheus组件，一个领域工作流程简单描述下
B：

A：Prometheus数据通过什么方式，push还是pull方式
B:pull

A: push方式什么情况下使用
B：护士的方式的话是有一些自定义的指标，他没法采集，然后通过组件的话可以推送到把采集的指标推送到托米修斯服务器，服务端那

A：push可能会用到哪些组件去实现
B：pushgateway

A：prome语句，你是直接用的模板还是根据业务实际需求写的
B：

A：k8s上面跑应用，有几种资源方式
B:

A：你deplayment我想把副本数调到5，有哪些方式可以实现
B：命令行改动，直接edit，更改yaml文件

A：数据库这块用过什么
B：mysql用的多一些

A：连mysql的命令是什么
B：

A：我要这有个表，然后我想查一下这个表有多少条数据，那时候你怎么写
B：聚合函数count

A：然后我这儿这个表是一个人员信息的表，然后我想查一下张三这个人的相关信息
B：

# 面试6：
## 面试内容
A：自我介绍
B：面试官你好，我叫苏林春，从2013年毕业至今有10余年的运维工作经验，从最初接触的传统服务架构，到后来随着刀客k8s项目的开源以及企业生产中实际的应用，开始使用k8s容器管理平台。
日常的工作有传统服务和k8s集群的选型部署，以及日常的系统监控与健康检查，使用监控工具在彼斯托米修斯来实施监测系统和网络的状态，定期对系统网络应用程序进行健康检查，还有一些日常的故障的处理和恢复，使用 Elk日志管理工具，华米修斯x工监控工具，快速的故障定位处理问题，并写进故障文档，编写故障预案，还有通过数据分析和系统监控，然后找出系统的性能瓶颈，对系统优化提高系统的响应速度和吞吐量，还有一些数据备份与恢复的工作，制定数据备份的策略，确保关键数据定期备份，提高系统，提高系不是还会定期进行灾难恢复演练这些，还会定期更新系统和应用程序，打补丁这些与开发测试业务沟通协作，然后对客户和业务部门的进行系统培训，这些工作大致就是这些。

A:













# 最终总结
## K8s
### pod的创建流程
### pod的状态
### 拉pod失败的几种原因，排除思路
### k8s有哪些控制器
### pod的调度策略
### deplayment我想把副本数调到5，有哪些方式可以实现
### k8s上面跑服务有几种方式
### Pod内部类似一个小操作系统，这里面根目录是存在哪里的，相对宿主机这边，他是怎么样的一个映射关系
### K8s上遇到过哪些困难，如何解决的
### halm(问的比较少)，halm版本滚动升级,halm包的目录结构和变量存放
### k8s数据迁移

## Prometheus
### 指标采集原理，采集过哪些指标
### prometheus监控过程中遇到过哪些问题
### Prometheus中promSQL的数据类型
### Prometheus是如何获取指标的
### prometheus是如何连接alertmanager?
### grafana是如何连接Prometheus的
### promethesu通常使用pull还是push，什么情况下使用push
### 简单描述下Prometheus的整个工作流程
### prometheus的monitor用过哪些(两个维度)
### 监控任务是写在配置文件里还是montior里

## nacos
### nacos你新建的时候用过哪些参数，和其他的服务是怎么关联的
### 老的nacos的数据迁到新的nacos数据，批量修改新的nacos参数

## ansible
### 变量相关
### 循环
### roles的目录结构



## redis
### 三种架构
#### 主从复制
#### 哨兵
#### Cluster

## Zabbix
### 自定义监控项
### 分级告警


## CICD
### 说一下持续集成和持续发布这个流程是什么样的
### CI流水线上面的东西，是靠什么实现的
### 说一下CI和CD的区别，哪一块属于CI，哪一块属于CD

## Kafka
### Kafka用的什么协议
### Kafka如何查看数据积压
### Kafka遇到过哪些问题(消息积压。。。)
### 同一个topic,如何区分


## ELK
### ELK部署到k8s上
### logstash的自定义加工过滤
### 两个ELK数据同步迁移，数据量很大

## mysql
### mysql备份迁移
### mysql主从，MHA，PXC(option)，原理和选举机制



## haproxy四层和7层的区别

## 常见问题
### 两条服务器不能相互访问，判断下不能访问的原因
### 负载均衡的几种模式
### 你们公司做的什么项目，你什么角色，你们的服务架构是怎样的


## miniIO
### 搭建好后，如何使用，业务上如何关联